(window.webpackJsonp=window.webpackJsonp||[]).push([[3,37],{1034:function(t,e,r){"use strict";r.r(e),r.d(e,"CommerceBuyButton",(function(){return L}));var o=r(4),n=(r(39),r(27),r(31),r(0)),c=r(989),d=r(993),l=r(1050),m=r(40),f=r(45),h=r(30),v=r(70);function O(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var y=class extends v.a{constructor(t){super(t),this.services=["tagular"]}get defaults(){return{"@type":"redventures.ecommerce.v1.ProductViewed"}}transform(data){var base=super.transform(data);return this.additionalData.tagular=base,data.customDimensions&&(data.customDimensions=data.customDimensions.filter((t=>t.value))),this.additionalData.tagular=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?O(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):O(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},data),{}}};y=Object(n.c)([Object(m.a)(h.a.Transient),Object(n.g)(0,f.a),Object(n.f)("design:paramtypes",[Object])],y);var w=r(393),j=r(996),k=r(995),C=(r(6),r(7),r(29),r(49),r(1220),r(116),r(138)),_=r(10),D=r(1121),P=new _.b("commerceUrlModifier"),U=class extends c.Vue{constructor(){super(...arguments),this.modifiedCommerceUrl="",this.performanceConsentGranted=!1,this._uuid="",this.stateMappings={articleName:this.$store.getters["tracking/data"].articleTitle,canonicalPath:this.$store.getters["routeHistory/getCurrentPath"],device:this.$store.getters.device,guid:this.$store.getters["tracking/viewGuid"]||"-",isAmp:this.$store.getters["format/isAmp"],topicPaths:this.$store.getters["tracking/dataByKey"]("topicPaths")}}get originalUrl(){return""}checkCohesionConsent(){var t,e;"function"==typeof(null===(t=null===window||void 0===window?void 0:window.cohesion)||void 0===t?void 0:t.consent)?this.performanceConsentGranted=null===(e=window.cohesion.consent("list"))||void 0===e?void 0:e.includes("C0002"):this.performanceConsentGranted=!1}injectCorrelationId(t){if(this._uuid=this.performanceConsentGranted?Object(C.v4)().replaceAll("-",""):this.$store.getters["tracking/data"].contentId.replaceAll("-",""),this.modifiedCommerceUrl=Object(D.c)(t,this._uuid),!this.performanceConsentGranted){var e=new RegExp(this._uuid+"-(dtp|mwb)","g");this.modifiedCommerceUrl=this.modifiedCommerceUrl.replace(e,"$&-oo")}P.log("Button click, consent status: ".concat(this.performanceConsentGranted)),setTimeout((()=>this.resetCommerceUrl(this.modifiedCommerceUrl)),500)}resetCommerceUrl(t){this.modifiedCommerceUrl=Object(D.d)(t,this._uuid)}modifyAmpUrl(){this.updateModifiedCommerceUrl(),this._uuid=Object(C.v4)(),this.modifiedCommerceUrl=Object(D.c)(this.modifiedCommerceUrl,this._uuid)}created(){this.modifiedCommerceUrl=this.originalUrl,this.$store.getters["format/isAmp"]&&this.modifyAmpUrl()}beforeMount(){this.updateModifiedCommerceUrl()}mounted(){window.cohesion&&(this.checkCohesionConsent(),P.log("Consent set: ".concat(this.performanceConsentGranted)),window.cohesion("ready",(()=>{window.cohesion("consent:changed",(()=>{this.checkCohesionConsent(),P.log("Consent changed: ".concat(this.performanceConsentGranted))}))})))}updateModifiedCommerceUrl(){this.modifiedCommerceUrl=Object(D.b)(this.originalUrl,this.stateMappings)}};Object(n.c)([Object(c.Watch)("originalUrl"),Object(n.f)("design:type",Function),Object(n.f)("design:paramtypes",[]),Object(n.f)("design:returntype",void 0)],U.prototype,"updateModifiedCommerceUrl",null);var I=U=Object(n.c)([c.Component],U),A=r(1122);function T(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var L=class extends c.Vue{get buttonHref(){return this.shouldMonetize?this.modifiedCommerceUrl:this.buttonUrl}get buttonClasses(){return"c-commerceBuyButton o-button o-button-".concat(this.buttonTheme," o-button-").concat(this.buttonSize," o-button-smallRound")}get correlationId(){return this._uuid}get formatSubType(){var t=this.isLink?"in-text link":"in-text button";return this.isImage&&(t=null),this.subtype||t}get isAmp(){return this.$store.getters["format/isAmp"]}get originalUrl(){return this.buttonUrl}get leadType(){return this.hasOffer?"manual":"mlst"}get formatType(){var t=this.isLink?"LINK":"BUTTON";return this.isImage&&(t="IMAGE"),t}get productData(){var t,e,r,o,n,c,d;return{brand:(null===(e=null===(t=this.leadClickData)||void 0===t?void 0:t.productManufacturer)||void 0===e?void 0:e.toString())||null,category:this.leadType,coupon:(null===(r=this.leadClickData)||void 0===r?void 0:r.coupon)||null,formatSubtype:this.formatSubType,formatType:this.formatType,location:this.isAmp?null:this.$attributeRef.location,name:(null===(o=this.leadClickData)||void 0===o?void 0:o.productName)||null,pageId:this.contentId||null,position:this.isAmp?1:this.$attributeRef.position,price:Number(this.buttonPrice)||0,productId:(null===(n=this.leadClickData)||void 0===n?void 0:n.productId)||null,quantity:1,sku:(null===(c=this.leadClickData)||void 0===c?void 0:c.productSku)||"",text:this.buttonText,upc:(null===(d=this.leadClickData)||void 0===d?void 0:d.productSku)||"",variant:this.variant||(this.isAmp?"":this.$attributeRef.section)}}get customDimensionsData(){var t,e,r,o,n=[{key:"shortcodeId",value:null===(t=this.leadClickData)||void 0===t?void 0:t.shortcodeId},{key:"shortcodeType",value:null===(e=this.leadClickData)||void 0===e?void 0:e.shortcodeType}];if(this.trackProductViewed&&this.allLeadsData){var c=[],d=[];this.allLeadsData.forEach(((t,e)=>{c=c.concat({key:"rawUrl_".concat(e),value:null==t?void 0:t.rawUrl}),d=d.concat({key:"vendor_".concat(e),value:null==t?void 0:t.resellerName})})),n=n.concat(c,d)}else n=n.concat([{key:"rawUrl",value:(null===(r=this.leadClickData)||void 0===r?void 0:r.rawUrl)||this.buttonUrl},{key:"vendor",value:null===(o=this.leadClickData)||void 0===o?void 0:o.resellerName}]);return n}get productClickedData(){return{actionOutcome:"EXTERNALLINK",correlationId:this._uuid,outboundUrl:this.buttonHref,product:this.productData,customDimensions:this.customDimensionsData}}get productViewedData(){return{product:this.productData,customDimensions:this.customDimensionsData}}get isEnabled(){var t;return!(this.$abtest.isUserInActiveTestAndBucket("bb_super","test")&&!this.isLink&&(null===(t=this.preferredResellers)||void 0===t?void 0:t.some((t=>"Best Buy"===t.name)))&&!this.buttonText.includes("Best Buy"))}trackAmpClick(){var t;this.$store.dispatch("ampTracking/addLead",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({selector:'[data-amp-correlation-id="'.concat(null===(t=this.productClickedData)||void 0===t?void 0:t.correlationId,'"]')},this.productClickedData))}fireProductViewed(){if(this.trackProductViewed){var t=w.a.replaceAttributeReferences(this.$el,this.productViewedData);this.$track(y).with(t).fire()}}created(){var t;Object(A.c)(this.buttonUrl)?t={cm07:!0}:this.buttonPrice&&!this.isLink&&(t={cm01:!0}),this.$store.dispatch("tracking/setPageComponents",t),this.isAmp&&this.trackAmpClick()}mounted(){this.trackProductViewed&&(this.inViewportObserver=new k.a({rootMargin:"0px",el:this.$el,threshold:.5},(()=>{this.inViewportObserver.destroy(),this.fireProductViewed()})))}beforeDestroy(){this.inViewportObserver&&this.inViewportObserver.destroy()}};Object(n.c)([Object(c.Prop)({default:"",type:String}),Object(n.f)("design:type",String)],L.prototype,"buttonText",void 0),Object(n.c)([Object(c.Prop)({default:"",type:String}),Object(n.f)("design:type",String)],L.prototype,"buttonUrl",void 0),Object(n.c)([Object(c.Prop)({default:"",type:[Number,String]}),Object(n.f)("design:type",Object)],L.prototype,"buttonPrice",void 0),Object(n.c)([Object(c.Prop)({default:"primary",type:String}),Object(n.f)("design:type",String)],L.prototype,"buttonTheme",void 0),Object(n.c)([Object(c.Prop)({default:"medium",type:String}),Object(n.f)("design:type",String)],L.prototype,"buttonSize",void 0),Object(n.c)([Object(c.Prop)({default:!1}),Object(n.f)("design:type",Boolean)],L.prototype,"trackProductViewed",void 0),Object(n.c)([Object(c.Prop)({default:null,type:Boolean}),Object(n.f)("design:type",Boolean)],L.prototype,"isImage",void 0),Object(n.c)([Object(c.Prop)({default:null,type:Boolean}),Object(n.f)("design:type",Boolean)],L.prototype,"isLink",void 0),Object(n.c)([Object(c.Prop)({default:!1,type:Boolean}),Object(n.f)("design:type",Boolean)],L.prototype,"hasOffer",void 0),Object(n.c)([Object(c.Prop)({default:!0}),Object(n.f)("design:type",Boolean)],L.prototype,"shouldMonetize",void 0),Object(n.c)([Object(c.Prop)({default:null}),Object(n.f)("design:type",String)],L.prototype,"subtype",void 0),Object(n.c)([Object(c.Prop)({default:null}),Object(n.f)("design:type",Object)],L.prototype,"leadClickData",void 0),Object(n.c)([Object(c.Prop)({default:null}),Object(n.f)("design:type",Array)],L.prototype,"allLeadsData",void 0),Object(n.c)([Object(c.Prop)({default:""}),Object(n.f)("design:type",String)],L.prototype,"contentId",void 0),Object(n.c)([Object(c.Prop)({default:null}),Object(n.f)("design:type",String)],L.prototype,"variant",void 0),Object(n.c)([Object(c.Prop)({default:null,type:Array}),Object(n.f)("design:type",Array)],L.prototype,"preferredResellers",void 0);var E=L=Object(n.c)([Object(c.Component)({mixins:[I]}),Object(d.a)("track-click",Object(j.a)(l.a))],L),S=(r(1222),r(137)),component=Object(S.a)(E,(function(){var t=this,e=t._self._c;t._self._setupProxy;return t.isEnabled?e("a",{directives:[{name:"track-click",rawName:"v-track-click",value:e=>(e.trackingData=t.productClickedData,e),expression:"(event) => {\n    event.trackingData = productClickedData;\n    return event;\n  }"}],class:{[t.buttonClasses]:!t.isLink},attrs:{href:t.buttonHref,"data-amp-correlation-id":t.isAmp?t.correlationId:null,rel:"noopener nofollow",target:"_blank"},on:{mousedown:function(e){return t.injectCorrelationId(t.modifiedCommerceUrl)}}},[t._t("default",(function(){return[t._v(t._s(t.buttonText))]}))],2):t._e()}),[],!1,null,null,null);e.default=component.exports},1050:function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));var o=r(4),n=r(0),c=r(40),d=r(45),l=r(30),m=r(70),f=r(34);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var v=class extends m.a{constructor(t){super(t),this.services=["tagular"]}get defaults(){return{"@type":"redventures.ecommerce.v1.ProductClicked"}}transform(data){var base=super.transform(data);if(this.additionalData.tagular=base,data.outboundUrl){var t=data.actionOutcome||this.getLinkActionOutcome(data.outboundUrl);"INTERNALLINK"===t&&data.outboundUrl===f.a.getPath(data.outboundUrl)&&(data.outboundUrl=f.a.liveUrl(data.outboundUrl)),data.actionOutcome=t}return data.customDimensions&&(data.customDimensions=data.customDimensions.filter((t=>t.value))),this.additionalData.tagular=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},data),{}}};v=Object(n.c)([Object(c.a)(l.a.Transient),Object(n.g)(0,d.a),Object(n.f)("design:paramtypes",[Object])],v)},1121:function(t,e,r){"use strict";r.d(e,"b",(function(){return O})),r.d(e,"c",(function(){return v})),r.d(e,"d",(function(){return h})),r.d(e,"a",(function(){return d}));r(27),r(31),r(29),r(49),r(116),r(39),r(100),r(6),r(7),r(203),r(139);var o=r(10),n=r(3),c=new o.b("commerceLinks"),d=["__COM_CLICK_ID__","CNET_CORRELATION_ID"],l="__ARTICLE_URL__",m="__ARTICLE_NAME__",f={"www.avantlink.com":"ctc","www.awin1.com":"clickref","www.tkqlhce.com":"sid","go.shopyourlikes.com":"afCampaignId","track.flexlinkspro.com":"fobs","click.linksynergy.com":"u1","shareasale.com":"afftrack","goto.walmart.com":"subId1","bestbuy.7tiv.net":"subId1","oc.brcclx.com":"tid","www.gopjn.com":"sid","www.pjatr.com":"sid","www.pjtra.com":"sid","www.pntra.com":"sid","www.pntrac.com":"sid"},h=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,o=t;if(t.includes(e)){t=t.replace(/(dtp|mwb)-oo/,"$1");var n=new RegExp(e,"g");return t.replace(n,r[0])}return o},v=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d,o=t;if(t.includes(r[0])||t.includes(r[1])){var n=new RegExp("(".concat(r.join("|"),")"),"g");return t.replace(n,e)}return o},O=function(t,e){var r=t;try{c.log("Original commerce URL: ",r);var o=t.includes("amazon.com"),h=t.startsWith("https://amazon")||t.startsWith("https://www.amazon"),v=function(t){var e="dtp";return t.device===n.b.Mobile&&(e="mwb"),t.isAmp&&(e="amp"),e}(e),O=function(t){return t.topicPaths.includes("home-internet")?"cb":t.topicPaths.includes("home-energy-and-utilities")?"ce":t.topicPaths.includes("personal-finance")?"cm":"cn"}(e),y=O+"-"+d[0]+"-"+v,w=!1;if((t=h?"https://assoc-redirect.amazon.com/g/r/"+t:t).includes("[subid_value]")?(t=t.replace("[subid_value]",y),w=!0):t.includes("subid_value")&&(t=t.replace("subid_value",y),w=!0),t.includes(l)){var j=encodeURIComponent("https://www.cnet.com"+e.canonicalPath);t=t.replace(l,j)}if(t.includes(m)){var k=encodeURIComponent(e.articleName);t=t.replace(m,k)}var C=new URL(t),_=C.searchParams;if(o){var D=d[0]+"|"+e.guid+"|"+v+"|"+O;_.delete("tag"),_.append("tag","cnet-buy-button-20"),_.delete("ascsubtag"),_.append("ascsubtag",D),w=!0}var P=f[C.host];!w&&P&&_.append(P,y);var U=C.toString();return c.log("Modified Commerce URL: ",U),U}catch(e){return c.error("could not construct URL: '".concat(t,"' "),e),r}}},1122:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return d})),r.d(e,"c",(function(){return l}));r(27),r(31);var o=r(34),n=function(t){var e,r,o,n,c,d,l,m,f,h=(null==t||null===(e=t.reviews)||void 0===e||null===(r=e.firsttake)||void 0===r?void 0:r.style)&&(null==t||null===(o=t.reviews)||void 0===o||null===(n=o.indepth)||void 0===n?void 0:n.style);return!!(null!=t&&null!==(c=t.manufacturer)&&void 0!==c&&c.slug&&null!=t&&null!==(d=t.manufacturer)&&void 0!==d&&d.name&&null!=t&&null!==(l=t.product)&&void 0!==l&&l.cdModel&&null!=t&&null!==(m=t.product)&&void 0!==m&&m.cdModelSlug)&&{make:{name:t.manufacturer.name,slug:t.manufacturer.slug},model:{name:t.product.cdModel,slug:t.product.cdModelSlug,cdId:null!==(f=t.product)&&void 0!==f&&f.cdId&&h?t.product.cdId:""}}};function c(t){var e,r,c,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l={utm_campaign:null!==(e=d.utm_campaign)&&void 0!==e?e:"",utm_content:null!==(r=d.utm_content)&&void 0!==r?r:"",utm_medium:"referral",utm_source:"roadshow",u1:d.isAmp?"CLIENT_ID(AMP_ECID_GOOGLE)":d.correlation_id,ref_url:d.ref_url,referrer_id:null!==(c=d.referrer_id)&&void 0!==c?c:""},m="/roadshow/roadshow-auto-buying-program/";if(t){var f,h=n(t);h&&null!==(f=h.model)&&void 0!==f&&f.cdId?m="https://roadshow.truecar.com/redirect-link.html?linkto=prices-new&chromeMake=".concat(h.make.slug,"&chromeTrimId=").concat(h.model.cdId,"&").concat(o.a.stringifyObject(l)):h&&(m="https://roadshow.truecar.com/prices-new/".concat(h.make.slug,"/").concat(h.model.slug,"-summary/?").concat(o.a.stringifyObject(l)))}return m}function d(){var t,e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c={utm_campaign:null!==(t=n.utm_campaign)&&void 0!==t?t:"",utm_content:null!==(e=n.utm_content)&&void 0!==e?e:"",utm_medium:"referral",utm_source:"roadshow",u1:n.isAmp?"CLIENT_ID(AMP_ECID_GOOGLE)":n.correlation_id,ref_url:n.ref_url,referrer_id:null!==(r=n.referrer_id)&&void 0!==r?r:""};return"https://roadshow.truecar.com/used-cars-for-sale/?".concat(o.a.stringifyObject(c))}function l(t){return t.includes("roadshow.truecar.com")}},1170:function(t,e,r){var content=r(1223);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(288).default)("edd6938a",content,!0,{sourceMap:!1})},1220:function(t,e,r){r(1221)},1221:function(t,e,r){"use strict";var o=r(22),n=r(46),c=r(35),d=r(111),l=r(50),m=r(112),f=r(306),h=r(65),v=r(158),O=r(402),y=r(602),w=r(55),j=r(101),k=w("replace"),C=TypeError,_=c("".indexOf),D=c("".replace),P=c("".slice),U=Math.max,I=function(t,e,r){return r>t.length?-1:""===e?r:_(t,e,r)};o({target:"String",proto:!0},{replaceAll:function(t,e){var r,o,c,w,A,T,L,E,S,x=d(this),M=0,R=0,B="";if(!m(t)){if((r=f(t))&&(o=h(d(O(t))),!~_(o,"g")))throw C("`.replaceAll` does not allow non-global regexes");if(c=v(t,k))return n(c,t,x,e);if(j&&r)return D(h(x),t,e)}for(w=h(x),A=h(t),(T=l(e))||(e=h(e)),L=A.length,E=U(1,L),M=I(w,A,0);-1!==M;)S=T?h(e(A,M,w)):y(A,w,M,[],void 0,e),B+=P(w,R,M)+S,R=M+L,M=I(w,A,M+E);return R<w.length&&(B+=P(w,R)),B}})},1222:function(t,e,r){"use strict";r(1170)},1223:function(t,e,r){var o=r(287)((function(i){return i[1]}));o.push([t.i,".c-commerceBuyButton{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%}",""]),o.locals={},t.exports=o},993:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));r(6),r(7),r(11);var o=r(390);function n(t){return{bind:t.bind?function(){return t.bind(...arguments)}:()=>{},componentUpdated:t.componentUpdated?function(){return t.componentUpdated(...arguments)}:()=>{},inserted:t.inserted?function(){return t.inserted(...arguments)}:()=>{},unbind:t.unbind?function(){return t.unbind(...arguments)}:()=>{},update:t.update?function(){return t.update(...arguments)}:()=>{}}}function c(t,e){var r=new e;return Object(o.createDecorator)((e=>{e.directives=(null==e?void 0:e.directives)||{},e.directives[t]=n(r)}))}},996:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));var o=r(393);class n{bind(t,e,r){var{arg:n,value:c}=e,{context:d}=r;this.action=()=>{var e,r=d.$track(this.eventType);(e="function"==typeof c?r.create(c):r.with(c).create()).trackingData=o.a.replaceAttributeReferences(t,e.trackingData),e.fire()},t.addEventListener(n||"mousedown",this.action)}unbind(t,e){var{arg:r,value:o}=e;t.removeEventListener(r||"mousedown",this.action)}}function c(t){return class extends n{get eventType(){return t}}}}}]);
//# sourceMappingURL=a9e6b69.modern.js.map